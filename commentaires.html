<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!--CUSTOM CSS LINK-->
    <link rel="stylesheet" href="style.css">

    <!--FONT AWESOME LINK-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
        integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!--GOOGLE FONTS LINK-->
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Lobster" />

    <title>LLCER Espagnol ~ Contact</title>
</head>

<body>
    <header>
        <div class="navbar">
            <div class="logo"><a href="#">LLCER Espagnol (Université de Rouen)</a></div>
            <ul class="links">
                <li><a href="index.html">Accueil</a></li>
                <li><a href="administration.html">Administration</a></li>
                <li><a href="licence.html">Licence</a></li>
                <li><a href="methodologie.html">Méthodologie</a></li>
                <li><a href="erasmus.html">Erasmus</a></li>
                <li><a href="#" class="active">Aide</a></li>
                <li><a href="#A_propos">À propos</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
            <div class="toggle_btn">
                <i class="fa-solid fa-bars"></i>
            </div>
        </div>

        <div class="dropdown_menu">
            <li><a href="index.html">Accueil</a></li>
            <li><a href="administration.html">Administration</a></li>
            <li><a href="licence.html">Licence</a></li>
            <li><a href="methodologie.html">Méthodologie</a></li>
            <li><a href="erasmus.html">Erasmus</a></li>
            <li><a href="#">Aide</a></li>
            <li><a href="#A_propos">À propos</a></li>
            <li><a href="contact.html">Contact</a></li>
            <!--<li><a href="#" class="action_btn">Soy Erasmus</a></li>-->
        </div>
    </header>
    <h1>Commentaires</h1>

    <form id="commentForm">
        <textarea id="commentContent" placeholder="Écris ton commentaire ici..." rows="4" cols="50"></textarea><br><br>
        <input type="text" id="commentAuthor" placeholder="Ton nom"><br><br>
        <button type="submit">Envoyer</button>
    </form>

    <div id="comment-section"></div>

    <script>
        document.getElementById('commentForm').addEventListener('submit', async function (e) {
            e.preventDefault();

            // Récupérer les données du formulaire
            const author = document.getElementById('commentAuthor').value;
            const content = document.getElementById('commentContent').value;

            // Envoi du commentaire au serveur
            const response = await fetch('/comments', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ author, content })
            });

            if (response.ok) {
                const comment = await response.json();
                displayComment(comment);
            }
        });

        // Récupérer et afficher les commentaires lors du chargement de la page
        window.onload = async function () {
            const response = await fetch('/comments');
            if (response.ok) {
                const comments = await response.json();
                comments.forEach(displayComment);
            }
        };

        // Affiche un commentaire dans la section des commentaires
        function displayComment(comment) {
            const commentSection = document.getElementById('comment-section');
            const commentDiv = document.createElement('div');
            commentDiv.classList.add('comment');

            const authorDiv = document.createElement('div');
            authorDiv.classList.add('comment-author');
            authorDiv.textContent = comment.author;

            const contentDiv = document.createElement('div');
            contentDiv.classList.add('comment-content');
            contentDiv.textContent = comment.content;

            commentDiv.appendChild(authorDiv);
            commentDiv.appendChild(contentDiv);

            commentSection.appendChild(commentDiv);
        }
    </script>
    <footer>
        <div class="container">
            <div class="row">
                <div class="footer-col">
                    <h4>Licence</h4>
                    <ul>
                        <li><a href="#">L1 (1ère annés)</a></li>
                        <li><a href="#">L2 (2ème annés)</a></li>
                        <li><a href="#">L3 (3ème annés)</a></li>
                        <li><a href="#">Type d'emploi du temps</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Besoin d'aide ?</h4>
                    <ul>
                        <li><a href="#">FAQ</a></li>
                        <li><a href="#">Vidéos utiles</a></li>
                        <li><a href="#">Boîte à outil</a></li>
                        <li><a href="#">Comment s'organiser ?</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Aidez le site</h4>
                    <ul>
                        <li><a href="#soutenir_le_site">Boîte à idée</a></li>
                        <li><a href="commentaires.html">Commentaires</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Suivez l'actus !</h4>
                    <div class="social_links">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
                <hr width="100%" color="#9D2A2A">
                <p>&copy; Copyright par <span class="color-acento">LLCER Espagnol (Université de
                        Rouen)</span> 2024 - 2025. Tous droits réservés.
                </p>
            </div>
        </div>
    </footer>

    <!-- JS SCRIPT link -->
    <script src="JAVA SCRIPT/active_navbar.js"></script>
    <script src="JAVA SCRIPT/dropDownMenu.js"></script>
    <script src="JAVA SCRIPT/commentaire.js"></script>

</body>

</html>